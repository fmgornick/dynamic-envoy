node:
  id: envoy-instance
  cluster: envoy-service

dynamic_resources:
  ads_config:
    api_type: GRPC
    transport_api_version: V3
    grpc_services:
    - envoy_grpc:
        cluster_name: xds_cluster
  cds_config: {resource_api_version: V3, ads: {} }
  lds_config: {resource_api_version: V3, ads: {} }

static_resources:
  clusters:
  - name: xds_cluster
    connect_timeout: 1s
    http2_protocol_options: {}
    load_assignment:
      cluster_name: xds_cluster
      endpoints:
      - lb_endpoints:
        - endpoint:
            address:
              socket_address:
                address: 127.0.0.1
                port_value: 6969


  # - name: c0
  #   connect_timeout: 1s
  #   lb_policy: round_robin
  #   load_assignment:
  #     cluster_name: c0
  #     endpoints:
  #     - lb_endpoints:
  #       - endpoint:
  #           address:
  #             socket_address:
  #               address: 127.0.0.1
  #               port_value: 1111
  #       - endpoint:
  #           address:
  #             socket_address:
  #               address: 127.0.0.1
  #               port_value: 2222
  #       - endpoint:
  #           address:
  #             socket_address:
  #               address: 127.0.0.1
  #               port_value: 3333
  #       - endpoint:
  #           address:
  #             socket_address:
  #               address: 127.0.0.1
  #               port_value: 4444
  # listeners:
  # - name: l0
  #   address:
  #     socket_address:
  #       address: 0.0.0.0
  #       port_value: 7777
  #   filter_chains:
  #   - filters:
  #     - name: envoy.filters.network.http_connection_manager
  #       typed_config:
  #         '@type': "type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager"
  #         stat_prefix: ingress_http
  #         http_filters:
  #         - name: envoy.filters.http.router
  #           typed_config:
  #             "@type": type.googleapis.com/envoy.extensions.filters.http.router.v3.Router
  #         route_config:
  #           name: local_route
  #           virtual_hosts:
  #           - name: c0
  #             domains:
  #             - '*'
  #             routes:
  #             - match: { prefix: "/" }
  #               route: { cluster: c0 }
